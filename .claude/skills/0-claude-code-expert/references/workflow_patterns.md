# Claude Code 워크플로우 패턴

## Brainstorm → Plan → Execute 패턴

이 패턴은 복잡한 기획/개발 작업을 체계적으로 수행하기 위한 3단계 워크플로우입니다.

## Phase 1: Brainstorming (브레인스토밍)

### 목적
- 요구사항 명확화
- 문제 정의
- 설계 방향 수립

### 수행 작업

1. **요구사항 이해**
   - 사용자 요청 분석
   - 핵심 목적 파악
   - 제약사항 확인

2. **소크라틱 질문**
   - 불명확한 부분 질문
   - 숨겨진 요구사항 발굴
   - 가정 검증

3. **기존 상황 분석**
   - 관련 문서 검색
   - 현재 구현 확인
   - 데이터 소스 파악

4. **충돌 체크**
   - 새 요구사항 vs 기존 사양
   - 비즈니스 규칙 충돌
   - 기술적 제약

5. **설계 방향 제안**
   - 해결 방안 제시
   - 대안 비교
   - 최적 설계 선택

### 산출물
- 명확화된 요구사항
- 기존 사양 분석
- 충돌 지점 및 해결 방향
- 설계 제안서

### 예시

```markdown
# Brainstorming: PRO 리포트 성장 단계 지표 추가

## 1. 요구사항 이해
- 목적: 고객의 성장 단계를 시각화
- 대상: PRO 서비스 사용자
- 기대 효과: 성장 동기 부여, 다음 단계 유도

## 2. 명확화 질문
Q: "성장 단계"의 기준은?
A: 매출 + 사용 기간 복합

Q: 몇 단계로 구분?
A: 5단계 (씨앗/새싹/성장/성숙/확장)

Q: 노출 위치는?
A: 상단 핵심 카드 영역

## 3. 기존 사양 분석
- 현재 리포트 타입: Full/Lite/Mini
- 매출 기준 분기: 100만원
- 상단 카드 영역: 3개 슬롯 사용 중

## 4. 충돌 체크
- 타입 분기와 성장 단계 분기 충돌 가능
- 해결: 타입 내에서 독립적으로 표시

## 5. 설계 방향
- 배지 형태로 표시
- growth_score = (매출 / 평균) × (기간 / 12)
- 다음 단계 달성 조건 표시
```

## Phase 2: Planning (계획 수립)

### 목적
- 상세 설계
- 작업 분해
- 테스트 케이스 정의

### 수행 작업

1. **기능 세분화**
   - 큰 기능을 작은 단위로 분해
   - 각 단위별 작업 정의
   - 우선순위 설정

2. **상세 명세 작성**
   - 화면 정의
   - 데이터 요구사항
   - 비즈니스 로직
   - 예외 상황

3. **테스트 케이스 정의**
   - 정상 시나리오
   - 예외 시나리오
   - 검증 기준

4. **문서 구조 설계**
   - Wiki 페이지 구조
   - 다이어그램 계획
   - 참고 링크

### 산출물
- 화면 정의서
- API 명세서
- 비즈니스 로직 정의
- 예외 처리 시나리오
- 테스트 케이스

### 예시

```markdown
# Planning: 성장 단계 지표 상세 계획

## 1. 기능 세분화
- 1.1. 성장 단계 계산 로직
- 1.2. 배지 UI 컴포넌트
- 1.3. 인사이트 메시지 생성
- 1.4. 다음 단계 조건 표시

## 2. 화면 정의
- 위치: 상단 핵심 카드 영역 상단
- 크기: 120×40px
- 색상: 단계별 차등 (초록→파랑 그라데이션)
- 텍스트: "[단계명] + 다음 단계까지 XX만원"

## 3. 데이터 요구사항

### API
- CA 2.0: order_amount (월별, 최근 12개월)
- FAS: confirm_timestamp (PRO 승인일)

### 계산식
growth_score = (현재_월_매출 / PRO_평균_매출) × (사용_개월수 / 12)

## 4. 비즈니스 로직
- 씨앗 (0~0.3): PRO 시작 단계
- 새싹 (0.3~0.6): 초기 성장
- 성장 (0.6~1.0): 평균 도달
- 성숙 (1.0~1.5): 평균 이상
- 확장 (1.5+): 고성장

## 5. 예외 처리
- PRO 승인 1개월 미만: "준비중" 표시
- 매출 0원: "씨앗" 단계 고정
- PRO 평균 데이터 없음: 절대 매출 기준 사용

## 6. 테스트 케이스
- TC1: 매출 0원, 승인 1개월 → "준비중"
- TC2: 매출 100만원, 승인 3개월 → "새싹"
- TC3: 매출 500만원, 승인 12개월 → "성장"
- TC4: 매출 1000만원, 승인 24개월 → "성숙"
```

## Phase 3: Execution (실행)

### 3-1. 검증 단계

#### 검증 항목
1. **데이터 소스 확인**
   - API 엔드포인트 정확성
   - 파라미터 누락 여부
   - 응답 필드 존재 여부

2. **계산식 검증**
   - 수식 논리 정확성
   - 단위 일관성
   - 반올림 규칙

3. **예외 상황 대응**
   - 0으로 나누기 방지
   - NULL 값 처리
   - 음수 값 처리

4. **비즈니스 규칙 준수**
   - 타입별 분기 조건
   - 노출/미노출 조건
   - 사양서 준수

5. **테스트 케이스 완성도**
   - 모든 시나리오 커버
   - 엣지 케이스 포함

#### 검증 체크리스트
- [ ] 데이터 소스 확인 완료
- [ ] 계산식 검증 완료
- [ ] 예외 상황 대응 정의 완료
- [ ] 비즈니스 규칙 충돌 없음
- [ ] 테스트 케이스 작성 완료

### 3-2. 문서화 단계

#### 수행 작업
1. **최종 문서 작성**
   - Mermaid/PlantUML 다이어그램
   - 표/목록 정리
   - 참고 링크 추가
   - 스크린샷/Figma 링크

2. **Wiki 업로드**
   - 적절한 위치에 업로드
   - Confluence 형식 변환
   - 링크 정리

3. **Jira 티켓 업데이트** (필요시)
   - Wiki 링크 추가
   - 상태 업데이트

## 특수 워크플로우

### Jira 티켓 분석 워크플로우

#### 단계
1. **Systematic Debugging**
   - 근본 원인 조사
   - 패턴 분석
   - 가설 테스트
   - 해결 방안 도출

2. **분류**
   - 단순 버그 → Plan → Execute
   - 새 요구사항 → Brainstorm → Plan → Execute

#### 분석 리포트 템플릿
```markdown
# Jira 분석 리포트

작성일: {YYYY-MM-DD}
대상: {Jira Code}

## 1. 요약
{한 문장 요약}

## 2. 문제 분석
### 근본 원인
{분석 결과}

### 패턴 분석
{유사 이슈, 공통점}

### 가설 검증
- 가설 1: {내용} → {검증 결과}

## 3. 해결 방안
### 단기 (즉시 적용)
{내용}

### 장기 (개선 사항)
{내용}

## 4. 리스크
{예상 리스크 및 대응}

## 5. 검증 계획
{테스트 방법}
```

### 데이터 지표 정의 워크플로우

#### 단계
1. **GA4 5대 원칙 적용**
   - Event-Based Model
   - User-Centric Analysis
   - Predictive Metrics
   - Attribution Modeling
   - Privacy-First

2. **5-tier 검증**
   - Accuracy (정확성)
   - Completeness (완전성)
   - Consistency (일관성)
   - Timeliness (시의성)
   - Interpretability (해석 가능성)

3. **API 매핑 및 계산식 검증**

4. **예외 처리 정의**

#### 통합 시점
- Brainstorming: 데이터 요구사항 도출 시
- Planning: 계산식 검증 시

### 경쟁사 비교 워크플로우

#### 단계
1. **비교 대상 선정**
   - Shopify, Google Analytics, Amazon 등

2. **최신 정보 수집**
   - WebSearch/WebFetch 사용
   - Fact 기반 데이터

3. **비교 분석표 작성**

4. **실행 가능한 권장사항 도출**

5. **Wiki 문서화**

#### 통합 시점
- Brainstorming: 설계 방향 참고 시

## 워크플로우 선택 가이드

| 작업 유형 | 워크플로우 |
|----------|-----------|
| 새로운 기능 기획 | Brainstorm → Plan → Execute |
| 단순 버그 수정 | Plan → Execute |
| Jira 이슈 분석 | Systematic Debugging → 분류 → 적절한 워크플로우 |
| 데이터 지표 정의 | Brainstorm (data-analyzing) → Plan → Execute |
| 경쟁사 비교 분석 | Brainstorm (benchmarking) → Plan → Execute |
| 문서 작성 | Plan → Execute |

## 베스트 프랙티스

1. **단계 건너뛰지 않기**
   - 각 단계는 다음 단계의 품질을 보장
   - 서두르면 재작업 발생

2. **산출물 명확히**
   - 각 단계의 산출물을 문서화
   - 다음 단계로 전달

3. **검증 체크리스트 활용**
   - 누락 방지
   - 품질 보장

4. **전문 스킬 적시 활용**
   - data-analyzing: 데이터 검증
   - benchmarking: 경쟁사 분석
   - systematic-debugging: 이슈 분석

5. **문서화는 필수**
   - 모든 워크플로우는 문서로 남기기
   - Wiki에 업로드하여 공유
