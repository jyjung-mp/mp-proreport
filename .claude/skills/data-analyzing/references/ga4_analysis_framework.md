# Google Analytics 4 분석 프레임워크

## GA4 핵심 철학

### 1. Event-Based Model (이벤트 기반 모델)
모든 사용자 인터랙션을 이벤트로 추적하고 분석합니다.

**핵심 원칙:**
- 모든 인터랙션 = 이벤트
- 이벤트 파라미터로 상세 정보 수집
- 사용자 속성(User Properties)과 이벤트 파라미터 구분

**PRO 리포트 적용:**
- 매출 이벤트: `purchase`, `add_to_cart`
- 참여 이벤트: `page_view`, `session_start`
- 전환 이벤트: `begin_checkout`, `complete_payment`

### 2. User-Centric Analysis (사용자 중심 분석)
세션이 아닌 사용자 여정 중심으로 데이터를 분석합니다.

**핵심 지표:**
- User Lifetime Value (LTV)
- User Engagement (참여도)
- User Retention (재방문율)
- Cohort Analysis (코호트 분석)

**PRO 리포트 적용:**
- 고객 LTV = 누적 매출 / 사용 기간
- 참여도 = 월별 PRO 기능 사용 빈도
- 재방문율 = 월별 활성 사용자 비율

### 3. Predictive Metrics (예측 지표)
과거 데이터를 기반으로 미래 행동을 예측합니다.

**GA4 예측 지표:**
- Purchase probability (구매 가능성)
- Churn probability (이탈 확률)
- Revenue prediction (예상 수익)

**PRO 리포트 적용:**
- 성장 가능성 = 현재 성장률 + 업종 평균
- 이탈 위험도 = PRO 기능 미사용 기간
- 예상 매출 = 추세 기반 예측

### 4. Attribution Modeling (기여도 분석)
다중 채널/기능의 기여도를 정확히 측정합니다.

**GA4 기여 모델:**
- Data-driven attribution (데이터 기반)
- Last-click (마지막 클릭)
- First-click (첫 클릭)
- Linear (선형)
- Time decay (시간 가중)

**PRO 리포트 적용:**
- PRO 매출 기여도 = SEO + CRM + 프로모션 + 채널
- 각 기능별 가중치 적용
- 중복 집계 방지 (하나의 주문은 하나의 기여도만)

### 5. Privacy-First (프라이버시 우선)
데이터 수집 최소화 및 사용자 동의 기반 수집

**핵심 원칙:**
- 필수 데이터만 수집
- 익명화/집계 데이터 활용
- 사용자 식별 정보 제외

## GA4 데이터 검증 체크리스트

### 1. 데이터 정확성 (Accuracy)
- [ ] 데이터 소스가 명확한가?
- [ ] 계산식이 논리적으로 정확한가?
- [ ] 단위가 일관되는가? (원, 달러, 건수 등)
- [ ] 반올림 규칙이 명시되어 있는가?

### 2. 데이터 완전성 (Completeness)
- [ ] 모든 필수 필드가 존재하는가?
- [ ] NULL/0 값 처리 방법이 정의되어 있는가?
- [ ] 예외 상황 대응이 명확한가?

### 3. 데이터 일관성 (Consistency)
- [ ] 동일 지표가 여러 곳에서 동일한 값을 보이는가?
- [ ] 합계가 부분합과 일치하는가?
- [ ] 기간별 비교가 일관된 기준인가?

### 4. 데이터 시의성 (Timeliness)
- [ ] 데이터 업데이트 주기가 명확한가?
- [ ] 지연 시간(latency)이 고려되었는가?
- [ ] 실시간/배치 구분이 명확한가?

### 5. 데이터 해석 가능성 (Interpretability)
- [ ] 사용자가 이해할 수 있는 용어인가?
- [ ] 인사이트가 명확히 전달되는가?
- [ ] 액션 가능한 정보인가?

## GA4 지표 정의 템플릿

모든 지표는 다음 형식으로 정의되어야 합니다:

```yaml
지표명: [한글명]
영문명: [English Name]
정의: [명확한 정의 1-2문장]
계산식: [수식]
데이터 소스:
  - API: [엔드포인트]
  - 필드: [필드명]
  - 기간: [집계 기간]
단위: [원, %, 건, 시간 등]
반올림: [소수점 자리수]
예외 처리:
  - NULL: [처리 방법]
  - 0: [처리 방법]
  - 음수: [처리 방법]
비즈니스 규칙:
  - [조건 1]: [처리 방법]
  - [조건 2]: [처리 방법]
인사이트: [사용자에게 전달할 핵심 메시지]
```

### 예시: PRO 매출 기여도

```yaml
지표명: PRO 매출 기여도
영문명: PRO Revenue Contribution
정의: PRO 기능(SEO, CRM, 프로모션, 채널)을 통해 발생한 매출의 합계
계산식: SEO 매출 + CRM 매출 + 프로모션 매출 + 채널 매출
데이터 소스:
  - API: CA 2.0 /ca2/attribution/traffic-analysis
  - 필드: order_amount (where source = SEO/CRM/Promotion/Channel)
  - 기간: 월간 (1일 ~ 말일)
단위: 원 (KRW)
반올림: 정수 (소수점 없음)
예외 처리:
  - NULL: 0원으로 처리
  - 0: "아직 PRO 매출이 발생하지 않았습니다" 넛지 표시
  - 음수: 오류 (음수 매출 불가)
비즈니스 규칙:
  - 중복 집계 방지: 하나의 주문은 하나의 기여도만 계산
  - 타입 2/3: PRO 매출 기여도는 노출하되, 섹션 간소화
인사이트: "PRO가 만들어준 매출은 {금액}원입니다"
```

## GA4 데이터 분석 프로세스

### 1단계: 비즈니스 질문 정의
- 무엇을 측정하고 싶은가?
- 왜 이 지표가 중요한가?
- 누가 이 정보를 사용하는가?

### 2단계: 데이터 소스 확인
- 어떤 API를 사용하는가?
- 필요한 필드가 모두 존재하는가?
- 데이터 품질은 보장되는가?

### 3단계: 계산식 설계
- 논리적으로 정확한가?
- 단위가 일관되는가?
- 예외 상황이 고려되었는가?

### 4단계: 검증
- 샘플 데이터로 테스트
- 엣지 케이스 확인
- 비즈니스 규칙 준수 확인

### 5단계: 인사이트 도출
- 데이터가 말하는 것은?
- 사용자가 취할 액션은?
- 다음 단계는?

## GA4 대시보드 설계 원칙

### 1. Pyramid Structure (피라미드 구조)
상단에 핵심 지표, 하단으로 갈수록 상세 정보

**PRO 리포트 적용:**
```
┌─────────────────────────────┐
│  핵심 카드 (3개)             │ ← 가장 중요한 지표
├─────────────────────────────┤
│  아바타 인사이트             │ ← 개인화된 인사이트
├─────────────────────────────┤
│  매출 추이                   │ ← 추세 분석
├─────────────────────────────┤
│  PRO 성과                    │ ← 기능별 상세
└─────────────────────────────┘
```

### 2. Progressive Disclosure (점진적 정보 공개)
처음엔 요약, 클릭하면 상세 정보

**예시:**
- Level 1: "PRO 매출 1,234,567원"
- Level 2: (클릭) SEO 50만원, CRM 30만원...
- Level 3: (클릭) SEO 상세 분석

### 3. Data-to-Ink Ratio (데이터-잉크 비율 최적화)
불필요한 장식 제거, 데이터에 집중

**피해야 할 것:**
- 과도한 색상
- 의미 없는 그라데이션
- 3D 차트
- 불필요한 격자선

### 4. Color Psychology (색상 심리학)
색상으로 의미 전달

**PRO 리포트 적용:**
- Green: 성장, 긍정 (매출 증가)
- Red: 경고, 주의 (매출 감소)
- Blue: 중립, 정보 (일반 데이터)
- Orange: 액션 유도 (CTA 버튼)

### 5. Context is King (맥락이 왕)
숫자만 보여주지 말고 의미를 전달

**나쁜 예:**
- "매출: 1,234,567원"

**좋은 예:**
- "지난달 대비 15% 증가한 1,234,567원"
- "업종 평균(80만원) 대비 154% 높은 수준"
- "PRO 덕분에 절약한 시간: 24시간 (100만원 상당)"

## GA4 용어 사전

| GA4 용어 | PRO 리포트 적용 | 설명 |
|---------|----------------|------|
| Event | 이벤트 | 사용자 인터랙션 (구매, 클릭 등) |
| User | 쇼핑몰 사장님 | 서비스 사용자 |
| Session | 세션 | 한 번의 방문 (GA4는 사용자 중심) |
| Conversion | 전환 | 구매 완료, 목표 달성 |
| Attribution | 기여도 | 매출 발생에 기여한 채널/기능 |
| Engagement | 참여도 | 사용자 활동 수준 |
| Retention | 재방문율 | 재사용 비율 |
| Cohort | 코호트 | 동일 시기 가입 그룹 |
| Funnel | 퍼널 | 전환 단계별 흐름 |
| Segment | 세그먼트 | 사용자 그룹 |

## 참고 자료

- Google Analytics 4 Documentation: https://support.google.com/analytics/answer/9164320
- GA4 Measurement Protocol: https://developers.google.com/analytics/devguides/collection/protocol/ga4
- Data-Driven Attribution: https://support.google.com/analytics/answer/10596866
