---
name: orchestrating
description: 복잡한 문제를 분석하고 전문가 스킬들(superpowers, dropshipping-feature-add, msa_project_manager 등)을 조율하여 해결하는 마스터 오케스트레이터 스킬입니다. 분석, 설계, 구현 또는 종합적인 프로젝트 워크플로우가 필요한 다면적 문제에 직면했을 때 사용하세요. 오케스트레이터는 문제의 성격에 따라 순차 실행, 병렬 실행 또는 다중 전문가 회의 소집을 지능적으로 결정합니다.
---

# Orchestrating (오케스트레이팅)

## 개요

이 스킬은 들어오는 요청을 분석하고 전문가 스킬들을 조율하여 복잡한 문제를 해결하는 마스터 지휘자 역할을 합니다. 과제가 주어지면 오케스트레이터는:

1. **분석**: 요청의 범위, 복잡도, 필요한 전문성을 파악
2. **결정**: 최적의 접근 방식 선택 (순차 실행, 병렬 실행, 다중 전문가 회의)
3. **위임**: 명확한 컨텍스트와 예상 결과물을 가지고 전문가 스킬에 위임
4. **통합**: 여러 전문가의 결과를 응집력 있는 솔루션으로 통합
5. **검증**: 최종 결과물이 원래 요청을 충족하는지 확인

## 핵심 의사결정 프레임워크

### 의사결정 트리

요청을 받았을 때 다음 의사결정 프레임워크를 따릅니다:

```
요청 수신
    │
    ├─→ [단순, 단일 도메인]
    │   └─→ 단일 전문가 스킬에 위임
    │
    ├─→ [복잡, 순차적 단계]
    │   └─→ 순차 오케스트레이션 (Mode A)
    │       예시: 기능 개발 (설계 → 계획 → 구현 → 테스트 → 문서화)
    │
    ├─→ [복잡, 독립적 작업]
    │   └─→ 병렬 오케스트레이션 (Mode B)
    │       예시: 다중 버그 수정, 여러 옵션의 비교 분석
    │
    └─→ [복잡, 전문성 종합 필요]
        └─→ 회의 오케스트레이션 (Mode C)
            예시: 주요 아키텍처 결정, 포괄적 재설계
```

## 오케스트레이션 모드

### Mode A: 순차 오케스트레이션

각 단계가 이전 결과를 기반으로 구축되는 논리적 순서로 전문가 스킬을 실행합니다.

**실행 조건:**
- 요청이 여러 개의 구분된 단계를 필요로 함
- 후속 단계가 이전 단계의 결과에 의존
- 명확한 워크플로우 진행이 존재

**워크플로우 패턴:**
1. 필요한 단계와 전문가 스킬 식별
2. 전체 컨텍스트를 가지고 첫 번째 전문가 실행
3. 결과물 수집 후 관련 컨텍스트를 다음 전문가에게 전달
4. 모든 단계가 완료될 때까지 반복
5. 최종 결과물 종합

**요청 예시:**
> "현재 PRO 리포트를 기존 PRO 리포트(wiki참고)와 PRO 엔터프라이즈 마스터 리포트(pdf참고)를 비교 분석해서 통합버전을 만들어봐."

**오케스트레이션 계획:**
```
Phase 1: 분석 (systematic-debugging)
  → Wiki 및 PDF 문서 로드
  → 기능 세트, UX 패턴, 데이터 구조 비교
  → 격차, 중복, 고유 강점 식별
  → 결과물: 비교 분석 리포트

Phase 2: 설계 (brainstorming + ux/ui 전문가)
  → 분석 결과 검토
  → 설계 결정을 위한 소크라테스식 질문 수행
  → CDS AI를 사용한 와이어프레임/목업 생성
  → 결과물: 통합 설계 사양서

Phase 3: 기술 명세 (writing-plans)
  → 설계를 기술 요구사항으로 변환
  → API 엔드포인트, 데이터 모델, UI 컴포넌트 정의
  → 구현 로드맵 작성
  → 결과물: 개발 명세 문서

Phase 4: 검증 (verification-before-completion)
  → 원래 요구사항 대비 검토
  → 모든 이해관계자 요구사항 충족 확인
  → 결과물: 최종 통합 사양서
```

### Mode B: 병렬 오케스트레이션

독립적인 전문가 스킬들을 동시에 실행하여 효율성을 극대화합니다.

**실행 조건:**
- 의존성이 없는 여러 개의 독립적 작업
- 작업들이 격리되어 분석/해결 가능
- 시간 효율성이 중요

**워크플로우 패턴:**
1. 요청을 독립적인 하위 작업으로 분해
2. 각 하위 작업을 적절한 전문가에게 할당
3. 전문가들을 병렬로 실행 (Task 도구로 다중 동시 호출)
4. 모든 전문가의 결과를 집계
5. 종합적인 결과물 합성

**요청 예시:**
> "시스템의 성능, 보안, 확장성 문제를 모두 분석해줘"

**오케스트레이션 계획:**
```
병렬 스트림 1: 성능 분석
  → systematic-debugging 스킬
  → 초점: 쿼리 최적화, 캐싱, 병목 현상

병렬 스트림 2: 보안 분석
  → code-reviewer 스킬 (보안 중심)
  → 초점: 인증, 인가, 데이터 보호

병렬 스트림 3: 확장성 분석
  → brainstorming 스킬 (아키텍처 검토)
  → 초점: 수평 확장, 로드 분산, 데이터 파티셔닝

종합:
  → 모든 발견사항 집계
  → 교차 관심사 식별
  → 영향도/노력 기준으로 권장사항 우선순위화
  → 결과물: 종합 시스템 분석 리포트
```

### Mode C: 회의 오케스트레이션

다양한 전문성이 필요한 복잡한 문제를 협력적으로 해결하기 위해 여러 전문가 스킬을 소집합니다.

**실행 조건:**
- 문제가 여러 관점의 종합을 필요로 함
- 단일 전문가가 완전한 솔루션을 가지고 있지 않음
- 전략적 결정이 다중 관점 분석을 필요로 함
- 요청이 명시적으로 "회의"를 요구함

**워크플로우 패턴:**
1. 문제 진술을 명확하게 구성
2. 필요한 모든 관련 전문가 관점 식별
3. 각 전문가로부터 초기 분석 수집
4. 다음 방법으로 "토론" 촉진:
   - 전문가 권장사항 간 충돌/트레이드오프 식별
   - 전문가들이 서로의 발견사항에 응답하도록 요청
   - 합의 또는 명확한 결정 기준이 나올 때까지 반복
5. 근거를 포함한 통합 권장사항 합성

**요청 예시:**
> "PRO 리포트를 아예 고객 유도 관점에서 다 바꾸고 싶은데 전체적으로 회의를 좀 해줘"

**오케스트레이션 계획:**
```
회의 참여자:
  1. brainstorming (디자인 씽킹)
     → 사용자 여정 매핑
     → 전환 최적화 전략

  2. ux/ui 전문가 (CDS AI 활용)
     → 고객 심리 원칙
     → 참여 패턴 분석

  3. systematic-debugging (현재 상태 분석)
     → 기존 사용자 행동 데이터
     → 이탈 지점 식별

  4. msa_project_manager (기술 실현 가능성)
     → 아키텍처 영향 평가
     → 구현 복잡도

회의 진행:
  Round 1: 각 전문가가 자신의 관점에서 분석
  Round 2: 교차 검토 - 전문가들이 서로의 발견사항 검토
  Round 3: 충돌/트레이드오프 식별 (예: UX 이상 vs 기술 실현 가능성)
  Round 4: 단계적 접근 방식으로 통합 전략 수렴

결과물: 다음을 포함한 종합 재설계 전략:
  - 고객 여정 최적화 계획
  - UX/UI 재설계 사양서
  - 기술 구현 로드맵
  - 단계별 출시 전략
```

## 사용 가능한 전문가 스킬

### 분석 및 디버깅
- **systematic-debugging**: 근본 원인 분석, 가설 검증
- **root-cause-tracing**: 콜 스택을 통한 버그 원인 역추적
- **testing-anti-patterns**: 테스트 품질 보증

### 설계 및 계획
- **brainstorming**: 소크라테스식 질문으로 모호한 아이디어를 구체적 설계로 정제
- **writing-plans**: 파일 경로와 코드 예시를 포함한 상세 구현 계획
- **defense-in-depth**: 다층 검증 전략

### 구현
- **test-driven-development**: RED-GREEN-REFACTOR TDD 워크플로우
- **dropshipping-feature-add**: 완전한 기능 개발 워크플로우 (dropshipping 프로젝트용)
- **subagent-driven-development**: 코드 리뷰 게이트를 통한 병렬 구현

### 리뷰 및 검증
- **code-reviewer**: 보안, 성능, 모범 사례 리뷰
- **receiving-code-review**: 코드 리뷰 피드백 대응
- **verification-before-completion**: 완료 전 증거 기반 검증

### 프로젝트 관리
- **msa_project_manager** (mpm): MSA 서비스 분석, Wiki 문서화, Jira 통합
- **using-git-worktrees**: 격리된 기능 개발
- **finishing-a-development-branch**: 병합/PR/정리 워크플로우
- **dispatching-parallel-agents**: 병렬 문제 해결

### 특화 도메인 스킬
- **condition-based-waiting**: 타임아웃 기반 대기를 조건 폴링으로 대체
- (프로젝트별 스킬이 개발되면 추가)

## 오케스트레이션 워크플로우

### Step 1: 요청 분석

요청을 받았을 때 체계적으로 분석:

**범위 평가:**
- 최종 결과물은 무엇인가? (문서, 구현, 결정, 분석)
- 몇 개의 구분된 전문성 도메인이 관련되는가?
- 명확한 단계가 있는가 아니면 단일 복잡 문제인가?

**의존성 분석:**
- 하위 작업들이 독립적으로 실행 가능한가? → Mode B (병렬) 고려
- 하위 작업들이 명확한 순서가 있는가? → Mode A (순차) 고려
- 하위 작업들이 관점의 종합을 필요로 하는가? → Mode C (회의) 고려

**전문가 매핑:**
- 어떤 전문가 스킬들이 관련되는가?
- 각 단계/하위 작업의 주요 스킬은 무엇인가?
- 지원 스킬이 필요한가?

### Step 2: 전략 선언

실행 전에 오케스트레이션 전략을 사용자에게 명확히 전달:

**템플릿:**
```
분석 결과, 이 요청은 [Mode A/B/C]로 처리합니다.

[Mode A - 순차 실행]
단계별 실행 계획:
1. [Phase 1]: [전문가 스킬] - [예상 결과물]
2. [Phase 2]: [전문가 스킬] - [예상 결과물]
...

[Mode B - 병렬 실행]
독립적 작업 스트림:
- Stream 1: [전문가 스킬] - [작업]
- Stream 2: [전문가 스킬] - [작업]
...

[Mode C - 전문가 회의]
참여 전문가:
- [전문가 1]: [관점]
- [전문가 2]: [관점]
...
회의 주제: [문제 진술]
```

### Step 3: 전문가 실행

**순차 실행 (Mode A):**
```
Skill 도구를 사용하여 스킬을 하나씩 실행
컨텍스트를 전달: "[이전 전문가]의 [발견사항]을 기반으로, 이제 [현재 작업]"
다음 단계에 필요한 주요 결과물 수집
```

**병렬 실행 (Mode B):**
```
Task 도구를 사용하여 여러 에이전트를 동시에 실행
충돌을 피하기 위해 명확한 작업 경계 설정
종합 전 결과 집계
```

**회의 실행 (Mode C):**
```
Round 1: 동일한 문제 컨텍스트로 모든 전문가 스킬 실행
Round 2: 각 전문가에게 다른 전문가들의 발견사항을 보여주고 응답 요청
Round 3: 충돌/트레이드오프 식별
Round 4: 해결 촉진 및 합의 도출
```

### Step 4: 통합 및 종합

전문가 실행 후 결과 종합:

1. **발견사항 집계**: 모든 전문가 결과물 수집
2. **패턴 식별**: 테마, 충돌, 의존성 찾기
3. **충돌 해결**: 전문가들의 의견이 다를 때 다음 기준으로 결정:
   - 프로젝트 제약사항 (CLAUDE.md에서)
   - 사용자 우선순위 (원래 요청에서)
   - 기술 실현 가능성
4. **통합 결과물 생성**: 발견사항을 응집력 있는 결과 형식으로 패키징

### Step 5: 검증 및 전달

최종 결과물 전달 전:

1. **완전성 체크**: 결과물이 원래 요청의 모든 측면을 다루는가?
2. **품질 체크**: 전문가 권장사항이 적절히 통합되었는가?
3. **실행 가능성 체크**: 결과물이 명확하고 실행 가능한가?
4. **증거 체크**: 주장이 전문가 분석으로 뒷받침되는가?

다음을 포함하여 최종 결과물 제시:
- 요약
- 도메인별로 정리된 상세 발견사항
- 우선순위가 있는 실행 가능한 권장사항
- 전문가의 뒷받침 증거

## 컨텍스트 관리

### 프로젝트 컨텍스트 로드

오케스트레이션 전에 관련 프로젝트 컨텍스트 확인:

**mp-proreport 프로젝트의 경우:**
- 프로젝트 가이드라인과 스킬 사용 규칙은 `CLAUDE.md` 참조
- 도메인별 문서는 `docs/` 참조
- 이슈 분석 시 과거 컨텍스트는 `.wikis/` 또는 `.jiras/` 참조

**일반 요청의 경우:**
- 필요 시 사용자에게 관련 문서 요청
- 컨텍스트 비대화 방지를 위해 필요한 것만 로드

### 전문가에게 컨텍스트 전달

전문가 스킬에 위임할 때:

**포함할 것:**
- 해당 전문가를 위한 구체적 작업
- 다른 전문가의 관련 이전 발견사항 (순차/회의인 경우)
- 프로젝트 컨텍스트의 제약사항 (예: "CLAUDE.md에 따라 TDD 준수 필요")

**제외할 것:**
- 무관한 프로젝트 세부사항
- 관련 없는 전문가의 결과물

## 특수 오케스트레이션 패턴

### 패턴: 기능 개발 (dropshipping-feature-add 변형)

MSA 프로젝트의 신규 기능 요청:

```
1. brainstorming → 요구사항 명확화, 엣지 케이스
2. writing-plans → 상세 구현 계획
3. test-driven-development → TDD 구현
4. code-reviewer → 품질 게이트
5. verification-before-completion → 최종 검증
6. mpm → Wiki 문서화
```

### 패턴: Jira/Wiki 분석

Jira 이슈 또는 Wiki 문서 분석 요청:

```
1. systematic-debugging → Jira/Wiki에서 문제 이해
2. root-cause-tracing → 필요 시 코드 깊이 분석
3. writing-plans → 해결 계획
4. test-driven-development → 수정 구현
5. mpm → 발견사항을 Wiki에 업데이트
6. [Jira에 결과 코멘트]
```

### 패턴: 비교 분석

비교 요청 (PRO 리포트 예시와 같은):

```
병렬 단계:
  - Stream A: 문서 1 분석 (Wiki)
  - Stream B: 문서 2 분석 (PDF)

순차 단계:
  1. 비교 발견사항 종합
  2. brainstorming → 통합 솔루션 설계
  3. UX/UI 전문가 → 목업 생성 (CDS AI)
  4. writing-plans → 기술 명세
  5. verification-before-completion → 완전성 검증
```

## 엣지 케이스 처리

### 사용자 요청이 모호할 때

오케스트레이션 전에 brainstorming 스킬로 명확화:
```
"질문이 다소 추상적이어서 brainstorming 스킬로 요구사항을 먼저 명확히 하겠습니다."
→ 소크라테스식 질문 수행
→ 명확해지면 오케스트레이션 진행
```

### 전문가가 실패할 때

전문가 스킬이 오류를 만나거나 부적절한 결과물을 생성한 경우:

1. **실패 분석**: 전문가가 왜 실패했는가? (불명확한 입력, 누락된 컨텍스트, 도구 한계)
2. **전략 조정**:
   - 전문가에게 더 구체적인 컨텍스트 제공
   - 작업을 더 작은 하위 작업으로 분해
   - 해당되면 대안 전문가 시도
3. **필요 시 에스컬레이션**: 근본적 차단 요소가 있으면 사용자에게 알림

### 결과가 충돌할 때

Mode C 회의가 충돌하는 전문가 권장사항을 생성한 경우:

1. **명시화**: "전문가 A는 X를 추천하고, 전문가 B는 Y를 추천합니다."
2. **트레이드오프 분석**: 각 접근 방식의 장단점은?
3. **결정 기준 적용**:
   - 사용자 우선순위 (불명확하면 질문)
   - 프로젝트 제약사항 (CLAUDE.md 가이드라인)
   - 리스크 평가 (보안, 성능, 유지보수성)
4. **근거와 함께 권장**: 선택한 접근 방식이 최적인 이유 설명

## 결과물 형식

### 분석 리포트 형식

```markdown
# [요청 제목] - 분석 결과

작성자: Claude Orchestrator
분석 일시: [타임스탬프]
적용 모드: [Mode A/B/C]

## 요약
[발견사항과 권장사항을 요약한 1-2 단락]

## 전문가 분석 결과

### [전문가 1]: [전문 영역]
[전문가 1의 주요 발견사항]

### [전문가 2]: [전문 영역]
[전문가 2의 주요 발견사항]

...

## 통합 권장사항

### 우선순위 1: [권장사항]
- **근거**: [전문가 증거]
- **예상 효과**: [영향도]
- **구현 복잡도**: [노력 추정]

### 우선순위 2: [권장사항]
...

## 다음 단계
[명확하고 실행 가능한 다음 단계]
```

### 구현 계획 형식

```markdown
# [기능/변경 제목] - 구현 계획

작성자: Claude Orchestrator
계획 수립일: [타임스탬프]

## 개요
[문제 진술 및 솔루션 접근 방식]

## 설계 사양
[brainstorming/설계 전문가로부터]

## 기술 구현 계획
[writing-plans 전문가로부터]

## 테스트 전략
[test-driven-development 전문가로부터]

## 검증 계획
[verification-before-completion 전문가로부터]

## 타임라인
[해당되면 단계별 출시]
```

## 스킬 호출 예시

### 예시 1: 순차 오케스트레이션 (Mode A)

**사용자 요청:**
> "셀러 주문 취소 Webhook 기능을 추가해줘"

**오케스트레이터 응답:**
```
분석 결과, 이 요청은 Mode A (순차 실행)로 처리합니다.

단계별 실행 계획:
1. brainstorming: Webhook 요구사항 명확화 (TID, 멱등성, 재시도 정책)
2. writing-plans: DB 스키마, API 명세, 테스트 계획
3. test-driven-development: TDD로 구현 (RED-GREEN-REFACTOR)
4. code-reviewer: 보안/성능 리뷰
5. verification-before-completion: 빌드 및 통합 테스트
6. mpm: Wiki 문서화

1단계를 시작합니다...
[brainstorming 스킬 호출]
```

### 예시 2: 병렬 오케스트레이션 (Mode B)

**사용자 요청:**
> "현재 시스템의 성능, 보안, 데이터 무결성 문제를 종합적으로 분석해줘"

**오케스트레이터 응답:**
```
분석 결과, 이 요청은 Mode B (병렬 실행)로 처리합니다.

독립적 작업 스트림:
- Stream 1: systematic-debugging (성능 분석 - 쿼리, 캐시, 병목)
- Stream 2: code-reviewer (보안 분석 - 인증, 인가, 데이터 보호)
- Stream 3: defense-in-depth (데이터 무결성 분석 - 검증 계층)

병렬로 3개 전문가를 실행합니다...
[3개 Task 에이전트를 동시에 실행]
```

### 예시 3: 회의 오케스트레이션 (Mode C)

**사용자 요청:**
> "PRO 리포트를 고객 전환율 최적화 관점에서 완전히 재설계하고 싶어. 전체적으로 회의 좀 해줘"

**오케스트레이터 응답:**
```
분석 결과, 이 요청은 Mode C (전문가 회의)로 처리합니다.

참여 전문가:
- brainstorming: 사용자 여정 분석 및 전환 최적화 전략
- UX/UI specialist (CDS AI): 고객 심리 기반 인터페이스 설계
- systematic-debugging: 현재 사용자 행동 데이터 및 이탈 지점 분석
- msa_project_manager: 기술적 실현 가능성 및 구현 복잡도 평가

회의 주제: 고객 전환율을 극대화하는 PRO 리포트 재설계 전략

Round 1을 시작합니다 - 각 전문가의 초기 분석...
[동일한 문제 컨텍스트로 모든 전문가 스킬 실행]

Round 2 - 전문가 간 교차 검토...
[전문가들에게 서로의 발견사항 제시]

Round 3 - 상충점 및 트레이드오프 식별...
[충돌 식별, 예: UX 이상 vs 구현 복잡도]

Round 4 - 통합 전략 수립...
[단계적 접근 방식으로 통합 전략 합성]
```

## 모범 사례

### 해야 할 것:
✅ 실행 전에 오케스트레이션 모드와 계획을 명확히 공지
✅ 전문가에게 관련 컨텍스트만 전달 (모든 것이 아님)
✅ 전문가 결과물을 신중하게 수집하고 통합
✅ 최종 결과물이 원래 요청을 충족하는지 검증
✅ 증거 기반 권장사항 제공
✅ 프로젝트 가이드라인 준수 (CLAUDE.md 규칙)

### 하지 말아야 할 것:
❌ 전략 선언 없이 전문가 실행
❌ 전문가에게 무관한 컨텍스트로 과부하
❌ 전문가 결과물을 맹목적으로 수용
❌ 종합 없이 부분 결과 전달
❌ 전문가 증거 없이 권장사항 작성
❌ 프로젝트별 스킬 사용 규칙 무시 (예: 신규 기능은 dropshipping-feature-add)

## 참조

이 스킬은 전문가 스킬들을 조율하지만 대체하지는 않습니다. 전문성을 복제하려 하지 말고 항상 전문가에게 위임하세요.

**주요 참조:**
- `CLAUDE.md`: 프로젝트별 스킬 사용 규칙, dropshipping-feature-add, mpm 등 사용 시점
- 전문가 스킬 문서: 각 전문가의 역량과 호출 패턴 이해

**오케스트레이터 원칙:**
> "오케스트레이터의 지능은 조율에 있지 전문화에 있지 않다. 전문가를 신뢰하고, 현명하게 통합하며, 응집력 있게 전달하라."
